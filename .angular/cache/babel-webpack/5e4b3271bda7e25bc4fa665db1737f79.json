{"ast":null,"code":"import { HttpErrorResponse } from '@angular/common/http';\nimport { CartService } from './cart.service';\nlet httpClientSpy;\nlet cartService;\nbeforeEach(() => {\n  httpClientSpy = jasmine.createSpyObj('HttpClient', ['get']);\n  cartService = new CartService(httpClientSpy);\n});\nit('should return expected carts (HttpClient called once)', done => {\n  const expectedHeroes = [{\n    id: '1',\n    age: 1,\n    snippet: 'dfb',\n    imageUrl: 'drfgsb',\n    name: 'zdrvs',\n    price: 34\n  }, {\n    id: '2',\n    age: 3,\n    snippet: 'dfbfb',\n    imageUrl: 'drfgxfbsb',\n    name: 'zdrxfgbvs',\n    price: 334\n  }];\n  httpClientSpy.get.and.returnValue(asyncData(expectedHeroes));\n  heroService.getHeroes().subscribe({\n    next: heroes => {\n      expect(heroes).withContext('expected heroes').toEqual(expectedHeroes);\n      done();\n    },\n    error: done.fail\n  });\n  expect(httpClientSpy.get.calls.count()).withContext('one call').toBe(1);\n});\nit('should return an error when the server returns a 404', done => {\n  const errorResponse = new HttpErrorResponse({\n    error: 'test 404 error',\n    status: 404,\n    statusText: 'Not Found'\n  });\n  httpClientSpy.get.and.returnValue(asyncError(errorResponse));\n  heroService.getHeroes().subscribe({\n    next: heroes => done.fail('expected an error, not heroes'),\n    error: error => {\n      expect(error.message).toContain('test 404 error');\n      done();\n    }\n  });\n});","map":{"version":3,"sources":["/Users/olena.kopyl/Documents/projects/my-project/src/app/cart.service.spec.ts"],"names":["HttpErrorResponse","CartService","httpClientSpy","cartService","beforeEach","jasmine","createSpyObj","it","done","expectedHeroes","id","age","snippet","imageUrl","name","price","get","and","returnValue","asyncData","heroService","getHeroes","subscribe","next","heroes","expect","withContext","toEqual","error","fail","calls","count","toBe","errorResponse","status","statusText","asyncError","message","toContain"],"mappings":"AAAA,SAASA,iBAAT,QAAkC,sBAAlC;AACA,SAASC,WAAT,QAA4B,gBAA5B;AACA,IAAIC,aAAJ;AACA,IAAIC,WAAJ;AACAC,UAAU,CAAC,MAAM;AACbF,EAAAA,aAAa,GAAGG,OAAO,CAACC,YAAR,CAAqB,YAArB,EAAmC,CAAC,KAAD,CAAnC,CAAhB;AACAH,EAAAA,WAAW,GAAG,IAAIF,WAAJ,CAAgBC,aAAhB,CAAd;AACH,CAHS,CAAV;AAIAK,EAAE,CAAC,uDAAD,EAA2DC,IAAD,IAAU;AAClE,QAAMC,cAAc,GAAG,CACnB;AAAEC,IAAAA,EAAE,EAAE,GAAN;AAAWC,IAAAA,GAAG,EAAE,CAAhB;AAAmBC,IAAAA,OAAO,EAAE,KAA5B;AAAmCC,IAAAA,QAAQ,EAAE,QAA7C;AAAuDC,IAAAA,IAAI,EAAE,OAA7D;AAAsEC,IAAAA,KAAK,EAAE;AAA7E,GADmB,EAEnB;AAAEL,IAAAA,EAAE,EAAE,GAAN;AAAWC,IAAAA,GAAG,EAAE,CAAhB;AAAmBC,IAAAA,OAAO,EAAE,OAA5B;AAAqCC,IAAAA,QAAQ,EAAE,WAA/C;AAA4DC,IAAAA,IAAI,EAAE,WAAlE;AAA+EC,IAAAA,KAAK,EAAE;AAAtF,GAFmB,CAAvB;AAIAb,EAAAA,aAAa,CAACc,GAAd,CAAkBC,GAAlB,CAAsBC,WAAtB,CAAkCC,SAAS,CAACV,cAAD,CAA3C;AACAW,EAAAA,WAAW,CAACC,SAAZ,GAAwBC,SAAxB,CAAkC;AAC9BC,IAAAA,IAAI,EAAEC,MAAM,IAAI;AACZC,MAAAA,MAAM,CAACD,MAAD,CAAN,CACKE,WADL,CACiB,iBADjB,EAEKC,OAFL,CAEalB,cAFb;AAGAD,MAAAA,IAAI;AACP,KAN6B;AAO9BoB,IAAAA,KAAK,EAAEpB,IAAI,CAACqB;AAPkB,GAAlC;AASAJ,EAAAA,MAAM,CAACvB,aAAa,CAACc,GAAd,CAAkBc,KAAlB,CAAwBC,KAAxB,EAAD,CAAN,CACKL,WADL,CACiB,UADjB,EAEKM,IAFL,CAEU,CAFV;AAGH,CAlBC,CAAF;AAmBAzB,EAAE,CAAC,sDAAD,EAA0DC,IAAD,IAAU;AACjE,QAAMyB,aAAa,GAAG,IAAIjC,iBAAJ,CAAsB;AACxC4B,IAAAA,KAAK,EAAE,gBADiC;AAExCM,IAAAA,MAAM,EAAE,GAFgC;AAE3BC,IAAAA,UAAU,EAAE;AAFe,GAAtB,CAAtB;AAIAjC,EAAAA,aAAa,CAACc,GAAd,CAAkBC,GAAlB,CAAsBC,WAAtB,CAAkCkB,UAAU,CAACH,aAAD,CAA5C;AACAb,EAAAA,WAAW,CAACC,SAAZ,GAAwBC,SAAxB,CAAkC;AAC9BC,IAAAA,IAAI,EAAEC,MAAM,IAAIhB,IAAI,CAACqB,IAAL,CAAU,+BAAV,CADc;AAE9BD,IAAAA,KAAK,EAAEA,KAAK,IAAI;AACZH,MAAAA,MAAM,CAACG,KAAK,CAACS,OAAP,CAAN,CAAsBC,SAAtB,CAAgC,gBAAhC;AACA9B,MAAAA,IAAI;AACP;AAL6B,GAAlC;AAOH,CAbC,CAAF","sourcesContent":["import { HttpErrorResponse } from '@angular/common/http';\nimport { CartService } from './cart.service';\nlet httpClientSpy;\nlet cartService;\nbeforeEach(() => {\n    httpClientSpy = jasmine.createSpyObj('HttpClient', ['get']);\n    cartService = new CartService(httpClientSpy);\n});\nit('should return expected carts (HttpClient called once)', (done) => {\n    const expectedHeroes = [\n        { id: '1', age: 1, snippet: 'dfb', imageUrl: 'drfgsb', name: 'zdrvs', price: 34 },\n        { id: '2', age: 3, snippet: 'dfbfb', imageUrl: 'drfgxfbsb', name: 'zdrxfgbvs', price: 334 },\n    ];\n    httpClientSpy.get.and.returnValue(asyncData(expectedHeroes));\n    heroService.getHeroes().subscribe({\n        next: heroes => {\n            expect(heroes)\n                .withContext('expected heroes')\n                .toEqual(expectedHeroes);\n            done();\n        },\n        error: done.fail\n    });\n    expect(httpClientSpy.get.calls.count())\n        .withContext('one call')\n        .toBe(1);\n});\nit('should return an error when the server returns a 404', (done) => {\n    const errorResponse = new HttpErrorResponse({\n        error: 'test 404 error',\n        status: 404, statusText: 'Not Found'\n    });\n    httpClientSpy.get.and.returnValue(asyncError(errorResponse));\n    heroService.getHeroes().subscribe({\n        next: heroes => done.fail('expected an error, not heroes'),\n        error: error => {\n            expect(error.message).toContain('test 404 error');\n            done();\n        }\n    });\n});\n"]},"metadata":{},"sourceType":"module"}